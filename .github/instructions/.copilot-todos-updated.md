# MOBAflow - GitHub Release Preparation

> **Cross-Session Knowledge Bridge** for Copilot
> **Created:** 2025-02-04 | **Last Update:** 2025-02-04

---

## ğŸš¨ CRITICAL - Required Before Release

### 1. ğŸ” Security & Secrets (HIGHEST PRIORITY!)

| Status | Task | Details |
|--------|------|---------|
| â³ | **Remove Azure Speech Key** | `WinUI\appsettings.json` contains real API key - MUST be removed! |
| â³ | **Create appsettings.template.json** | Create template without secrets |
| â³ | **.gitignore for secrets** | Add appsettings.json to .gitignore |
| â³ | **Rotate Azure Key** | Generate new key after cleanup |

### 2. ğŸ“œ Copyright Header

| Status | Task | Details |
|--------|------|---------|
| âœ… | **Plugin files headers** | All 9 plugin files now have copyright headers (04.02.2025) |
| â³ | **Sync copyright year** | LICENSE: 2025, Headers: 2025-2026 - needs sync |

---

## âœ… Completed Tasks (04.02.2025)

### Legacy Code Cleanup
| Status | Task |
|--------|------|
| âœ… | Deleted `Backend\Interface\IAction.cs` - unused |
| âœ… | Deleted `WinUI\Configuration\AppSettings.cs` - duplicate |
| âœ… | Deleted `Sound\ISpeakerEngineFactory.cs` - unused factory |
| âœ… | Deleted `Sound\SpeakerEngineFactory.cs` - unused factory |
| âœ… | Removed obsolete `Play()` methods from ISoundPlayer |
| âœ… | Removed obsolete `Segment*EndpointIndex` from TrackConnection |
| âœ… | Removed obsolete `AnyRail.Parse()` sync method |

### Documentation
| Status | Task |
|--------|------|
| âœ… | Created `CONTRIBUTING.md` (English) |
| âœ… | Created `docs/wiki/AZURE-SPEECH-SETUP.md` (English) |
| âœ… | Moved `.copilot-todos.md` to `.github/instructions/` |

---

## ğŸ” ReSharper Code Inspection Results

### High Priority Issues (Should Fix)

#### SharedUI Project
| File | Issue | Priority |
|------|-------|----------|
| `TrackPlanEditorViewModel.cs` | 6 unassigned readonly fields | ğŸ”´ High |
| `MainWindowViewModel.cs` | Unused `photoHubClient` parameter | ğŸŸ¡ Medium |
| `MainWindowViewModel.Z21.cs` | Parameter hides member `isConnected` | ğŸŸ¡ Medium |
| `LocomotiveViewModel.cs` | Unused partial method parameter | ğŸŸ¢ Low |
| `WagonViewModel.cs` | Unused partial method parameter | ğŸŸ¢ Low |

#### WinUI Project
| File | Issue | Priority |
|------|-------|----------|
| `IoService.cs` | 7x CS8629 nullable warnings | ğŸŸ¡ Medium |
| `IoService.cs` | Unused variable `ex` | ğŸŸ¢ Low |
| `PluginLoader.cs` | Redundant using, async without await | ğŸŸ¢ Low |
| `App.xaml.cs` | Redundant namespace qualifier | ğŸŸ¢ Low |
| XAML files | Many "Constructor must be public" (false positives) | âšª Ignore |

#### TrackPlan Project
| File | Issue | Priority |
|------|-------|----------|
| `PathDataTransformer.cs` | 3 unused parameters | ğŸŸ¡ Medium |
| `Transform2D.cs` | Unused variable `otherRad` | ğŸŸ¢ Low |

#### MAUI Project
| File | Issue | Priority |
|------|-------|----------|
| `MauiProgram.cs` | 5 unused parameters (SSL callback) | ğŸŸ¢ Low |

#### Test Project
| File | Issue | Priority |
|------|-------|----------|
| `Z21WrapperTests.cs` | Access to disposed closure | ğŸ”´ High |
| `FeedbackPacketGenerator.cs` | Invalid XML doc comments | ğŸŸ¢ Low |

### XAML Issues (Mostly False Positives)
- `BodyStrongTextBlockStyle` not found - May be runtime-defined
- `AccentButtonStyle` not found - May be runtime-defined  
- Many "Constructor must be public" - ReSharper false positive for XAML

---

## ğŸ“Š Progress Summary

| Category | Status | Progress |
|----------|--------|----------|
| **Security** | â³ | 0/4 - Azure Key removal pending |
| **Copyright** | âœ… | 9/9 headers added |
| **Legacy Code** | âœ… | 7/7 items cleaned |
| **Documentation** | âœ… | CONTRIBUTING + Wiki done |
| **Code Quality** | â³ | ~20 issues from ReSharper |

**Overall:** ~70% complete (security items blocking release)

---

## ğŸ“ Recommended Next Steps

### Before GitHub Release:
1. ğŸ” Remove Azure Speech Key from appsettings.json
2. ğŸ” Create appsettings.template.json  
3. ğŸ” Update .gitignore
4. ğŸ“œ Sync copyright year

### Code Quality (Nice to Have):
5. Fix `TrackPlanEditorViewModel.cs` unassigned fields
6. Fix `Z21WrapperTests.cs` disposed closure issue
7. Clean up unused parameters with `_ = param;`
8. Fix nullable warnings in `IoService.cs`

---

*Last updated: 2025-02-04 by Copilot*
