<UserControl
    x:Class="Moba.WinUI.Controls.FunctionButtonControl"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <!--
    ESU-Style Function Button for DCC functions (F0-F28)
    - Square button with icon
    - Function number badge in corner
    - Toggle state with accent color when active
    -->

    <Grid>
        <Button
            x:Name="FunctionButton"
            Width="56"
            Height="56"
            Padding="4"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch"
            Click="OnButtonClick"
            CornerRadius="8">
            <Button.Resources>
                <!-- Override button styles for function button appearance -->
                <StaticResource x:Key="ButtonBackground" ResourceKey="CardBackgroundFillColorSecondaryBrush" />
                <StaticResource x:Key="ButtonBackgroundPointerOver" ResourceKey="CardBackgroundFillColorDefaultBrush" />
                <StaticResource x:Key="ButtonBackgroundPressed" ResourceKey="SubtleFillColorTertiaryBrush" />
            </Button.Resources>
            <Grid>
                <!-- Function Icon -->
                <FontIcon
                    x:Name="FunctionIcon"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    FontSize="24"
                    Glyph="&#xE71E;" />

                <!-- Function Number Badge -->
                <Border
                    x:Name="NumberBadge"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Bottom"
                    Margin="0,0,-4,-4"
                    Padding="4,1"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="4">
                    <TextBlock
                        x:Name="FunctionNumberText"
                        FontSize="10"
                        FontWeight="SemiBold"
                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                        Text="0" />
                </Border>
            </Grid>
        </Button>

        <!-- Active state overlay -->
        <Border
            x:Name="ActiveOverlay"
            IsHitTestVisible="False"
            Background="{ThemeResource AccentFillColorDefaultBrush}"
            Opacity="0.3"
            CornerRadius="8"
            Visibility="Collapsed" />
    </Grid>
</UserControl>
