<Page
    x:Class="Moba.WinUI.View.TrainControlPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:controls="using:Moba.WinUI.Controls"
    xmlns:converter="using:Moba.WinUI.Converter"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:interactivity="using:Microsoft.Xaml.Interactivity"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    DataContext="{x:Bind ViewModel}"
    mc:Ignorable="d">

    <Page.Resources>
        <converter:BoolToBacklightBrushConverter x:Key="BacklightConverter" />
        <converter:IntToPresetCheckedConverter x:Key="IntToPresetCheckedConverter" />
        <converter:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
        <converter:MillivoltsToVoltsConverter x:Key="MillivoltsToVoltsConverter" />
    </Page.Resources>

    <Grid Padding="0">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Page Header - Fluent Design System with elevated background  -->
        <Border
            x:Name="HeaderBorder"
            Grid.Row="0"
            Background="{ThemeResource AcrylicInAppFillColorDefaultBrush}"
            BorderBrush="{ThemeResource DividerStrokeColorDefaultBrush}"
            BorderThickness="0,0,0,1">
            <Grid
                x:Name="HeaderGrid"
                Padding="32,20,32,20"
                ColumnSpacing="24">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" MinWidth="150" />
                    <!--  Title  -->
                    <ColumnDefinition Width="*" MinWidth="250" />
                    <!--  Baureihe + Vmax  -->
                    <ColumnDefinition Width="Auto" MinWidth="80" />
                    <!--  Skin  -->
                    <ColumnDefinition Width="Auto" MinWidth="180" />
                    <!--  Emergency Stop  -->
                </Grid.ColumnDefinitions>

                <StackPanel
                    Grid.Column="0"
                    VerticalAlignment="Center"
                    Spacing="4">
                    <TextBlock
                        x:Name="TitleText"
                        AutomationProperties.HeadingLevel="Level1"
                        FontSize="32"
                        FontWeight="SemiBold"
                        Text="Train Control" />
                </StackPanel>

                <!--  Locomotive Series Selection (Baureihe)  -->
                <StackPanel
                    Grid.Column="1"
                    HorizontalAlignment="Left"
                    VerticalAlignment="Center"
                    Orientation="Horizontal"
                    Spacing="12">
                    <AutoSuggestBox
                        x:Name="LocoSeriesBox"
                        Width="220"
                        VerticalAlignment="Center"
                        AutomationProperties.HelpText="Enter locomotive series to set maximum speed"
                        AutomationProperties.Name="Locomotive Series Selection"
                        PlaceholderText="Baureihe (z.B. BR 103)"
                        QuerySubmitted="LocoSeriesBox_QuerySubmitted"
                        SuggestionChosen="LocoSeriesBox_SuggestionChosen"
                        TextChanged="LocoSeriesBox_TextChanged">
                        <AutoSuggestBox.QueryIcon>
                            <FontIcon FontSize="12" Glyph="&#xE7C0;" />
                        </AutoSuggestBox.QueryIcon>
                    </AutoSuggestBox>
                    <StackPanel
                        x:Name="VmaxDisplay"
                        VerticalAlignment="Center"
                        AutomationProperties.LiveSetting="Polite"
                        Orientation="Horizontal"
                        Spacing="4"
                        Visibility="Collapsed">
                        <TextBlock
                            VerticalAlignment="Center"
                            FontSize="12"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            Text="Vmax:" />
                        <TextBlock
                            x:Name="VmaxText"
                            VerticalAlignment="Center"
                            AutomationProperties.Name="Maximum Speed in kilometers per hour"
                            FontSize="12"
                            FontWeight="SemiBold"
                            Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                            Text="0" />
                    </StackPanel>
                </StackPanel>

                <!--  Skin Selector Button with Flyout  -->
                <Button
                    x:Name="SkinSelectorButton"
                    Grid.Column="2"
                    VerticalAlignment="Center"
                    AccessKey="K"
                    AutomationProperties.Name="Select Color Skin"
                    ToolTipService.ToolTip="Select Skin (Alt+K)">
                    <Button.Content>
                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <FontIcon FontSize="16" Glyph="&#xE790;" />
                            <TextBlock Text="Skin" />
                        </StackPanel>
                    </Button.Content>
                    <Button.Flyout>
                        <Flyout Placement="Bottom">
                            <StackPanel Width="200" Spacing="8">
                                <TextBlock
                                    FontSize="12"
                                    FontWeight="SemiBold"
                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                    Text="SELECT SKIN" />
                                <Button
                                    HorizontalAlignment="Stretch"
                                    AutomationProperties.Name="System Accent Color"
                                    Click="OnSkinSystemClicked">
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <Border
                                            Width="20"
                                            Height="20"
                                            Background="{ThemeResource SystemAccentColor}"
                                            CornerRadius="4" />
                                        <TextBlock VerticalAlignment="Center" Text="System" />
                                    </StackPanel>
                                </Button>
                                <Border Height="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}" />
                                <TextBlock
                                    FontSize="10"
                                    Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                    Text="COLOR SKINS" />
                                <Button
                                    HorizontalAlignment="Stretch"
                                    AutomationProperties.Name="Blue Color Skin"
                                    Click="OnSkinBlueClicked">
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <Border
                                            Width="20"
                                            Height="20"
                                            Background="#0078D0"
                                            CornerRadius="4" />
                                        <TextBlock VerticalAlignment="Center" Text="Blue" />
                                    </StackPanel>
                                </Button>
                                <Button
                                    HorizontalAlignment="Stretch"
                                    AutomationProperties.Name="Green Color Skin"
                                    Click="OnSkinGreenClicked">
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <Border
                                            Width="20"
                                            Height="20"
                                            Background="#2ECC71"
                                            CornerRadius="4" />
                                        <TextBlock VerticalAlignment="Center" Text="Green" />
                                    </StackPanel>
                                </Button>
                                <Button
                                    HorizontalAlignment="Stretch"
                                    AutomationProperties.Name="Orange Color Skin"
                                    Click="OnSkinOrangeClicked">
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <Border
                                            Width="20"
                                            Height="20"
                                            Background="#FF6600"
                                            CornerRadius="4" />
                                        <TextBlock VerticalAlignment="Center" Text="Orange" />
                                    </StackPanel>
                                </Button>
                                <Button
                                    HorizontalAlignment="Stretch"
                                    AutomationProperties.Name="Red Color Skin"
                                    Click="OnSkinRedClicked">
                                    <StackPanel Orientation="Horizontal" Spacing="12">
                                        <Border
                                            Width="20"
                                            Height="20"
                                            Background="#CC0000"
                                            CornerRadius="4" />
                                        <TextBlock VerticalAlignment="Center" Text="Red" />
                                    </StackPanel>
                                </Button>
                            </StackPanel>
                        </Flyout>
                    </Button.Flyout>
                </Button>

                <Button
                    Grid.Column="3"
                    Padding="16,8"
                    VerticalAlignment="Center"
                    AccessKey="S"
                    AutomationProperties.HelpText="Immediately stops the locomotive"
                    AutomationProperties.Name="Emergency Stop"
                    Command="{x:Bind ViewModel.EmergencyStopCommand}"
                    Style="{StaticResource DangerButtonStyle}">
                    <StackPanel Orientation="Horizontal" Spacing="12">
                        <FontIcon
                            FontSize="18"
                            Foreground="White"
                            Glyph="&#xE711;" />
                        <TextBlock
                            VerticalAlignment="Center"
                            FontSize="14"
                            FontWeight="Bold"
                            Foreground="White"
                            Text="EMERGENCY STOP" />
                    </StackPanel>
                </Button>
            </Grid>
        </Border>

        <!--  Main Content with Responsive Layout - Fluent Design  -->
        <Grid
            x:Name="MainContentGrid"
            Grid.Row="1"
            Padding="32,24,32,32"
            ColumnSpacing="16"
            RowSpacing="16">
            <!--  COLUMN DEFINITIONS: Will be modified by VisualStateManager  -->
            <Grid.ColumnDefinitions>
                <!--  Col 0: Settings Panel (260px on Wide, 250px on Medium, hidden on Compact)  -->
                <ColumnDefinition Width="260" />
                <!--  Col 1: Center Grid (4 Quadrants - flexible, grows to fill space)  -->
                <ColumnDefinition Width="*" />
                <!--  Col 2: Functions Panel (180px on Wide, hidden on Medium/Compact)  -->
                <ColumnDefinition Width="180" />
            </Grid.ColumnDefinitions>

            <!--  LEFT PANEL: Locomotive Settings (Grid.Column="0")  -->
            <Border
                x:Name="SettingsPanel"
                Grid.Column="0"
                Padding="16"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="8">
                <ScrollViewer Padding="0,0,8,0" VerticalScrollBarVisibility="Auto">
                    <StackPanel Spacing="20">
                        <!--  Header  -->
                        <StackPanel Spacing="2">
                            <TextBlock
                                FontSize="16"
                                FontWeight="SemiBold"
                                Text="Locomotive" />
                            <TextBlock
                                FontSize="11"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="Select preset and control" />
                        </StackPanel>

                        <!--  Locomotive Presets - Compact table layout  -->
                        <StackPanel Spacing="8">
                            <TextBlock
                                FontSize="11"
                                FontWeight="SemiBold"
                                Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                Text="LOCOMOTIVE PRESET" />
                            <!--  Preset 1  -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="70" />
                                </Grid.ColumnDefinitions>
                                <RadioButton
                                    Grid.Column="0"
                                    MinWidth="0"
                                    Padding="0"
                                    VerticalAlignment="Center"
                                    Command="{x:Bind ViewModel.SelectPreset1Command}"
                                    GroupName="LocoPreset"
                                    IsChecked="{x:Bind ViewModel.SelectedPresetIndex, Mode=OneWay, Converter={StaticResource IntToPresetCheckedConverter}, ConverterParameter=0}" />
                                <StackPanel
                                    Grid.Column="1"
                                    Margin="4,0,8,0"
                                    VerticalAlignment="Center"
                                    Orientation="Horizontal"
                                    Spacing="6">
                                    <FontIcon FontSize="14" Glyph="&#xE7C0;" />
                                    <TextBlock FontWeight="SemiBold" Text="Lok 1" />
                                </StackPanel>
                                <NumberBox
                                    Grid.Column="2"
                                    Height="32"
                                    VerticalAlignment="Center"
                                    Maximum="9999"
                                    Minimum="1"
                                    SpinButtonPlacementMode="Compact"
                                    Value="{x:Bind ViewModel.Preset1Address, Mode=TwoWay}" />
                            </Grid>
                            <!--  Preset 2  -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="70" />
                                </Grid.ColumnDefinitions>
                                <RadioButton
                                    Grid.Column="0"
                                    MinWidth="0"
                                    Padding="0"
                                    VerticalAlignment="Center"
                                    Command="{x:Bind ViewModel.SelectPreset2Command}"
                                    GroupName="LocoPreset"
                                    IsChecked="{x:Bind ViewModel.SelectedPresetIndex, Mode=OneWay, Converter={StaticResource IntToPresetCheckedConverter}, ConverterParameter=1}" />
                                <StackPanel
                                    Grid.Column="1"
                                    Margin="4,0,8,0"
                                    VerticalAlignment="Center"
                                    Orientation="Horizontal"
                                    Spacing="6">
                                    <FontIcon FontSize="14" Glyph="&#xE7C0;" />
                                    <TextBlock FontWeight="SemiBold" Text="Lok 2" />
                                </StackPanel>
                                <NumberBox
                                    Grid.Column="2"
                                    Height="32"
                                    VerticalAlignment="Center"
                                    Maximum="9999"
                                    Minimum="1"
                                    SpinButtonPlacementMode="Compact"
                                    Value="{x:Bind ViewModel.Preset2Address, Mode=TwoWay}" />
                            </Grid>
                            <!--  Preset 3  -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="70" />
                                </Grid.ColumnDefinitions>
                                <RadioButton
                                    Grid.Column="0"
                                    MinWidth="0"
                                    Padding="0"
                                    VerticalAlignment="Center"
                                    Command="{x:Bind ViewModel.SelectPreset3Command}"
                                    GroupName="LocoPreset"
                                    IsChecked="{x:Bind ViewModel.SelectedPresetIndex, Mode=OneWay, Converter={StaticResource IntToPresetCheckedConverter}, ConverterParameter=2}" />
                                <StackPanel
                                    Grid.Column="1"
                                    Margin="4,0,8,0"
                                    VerticalAlignment="Center"
                                    Orientation="Horizontal"
                                    Spacing="6">
                                    <FontIcon FontSize="14" Glyph="&#xE7C0;" />
                                    <TextBlock FontWeight="SemiBold" Text="Lok 3" />
                                </StackPanel>
                                <NumberBox
                                    Grid.Column="2"
                                    Height="32"
                                    VerticalAlignment="Center"
                                    Maximum="9999"
                                    Minimum="1"
                                    SpinButtonPlacementMode="Compact"
                                    Value="{x:Bind ViewModel.Preset3Address, Mode=TwoWay}" />
                            </Grid>
                        </StackPanel>

                        <!--  Direction  -->
                        <StackPanel Spacing="6">
                            <TextBlock
                                FontSize="11"
                                FontWeight="SemiBold"
                                Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                Text="DIRECTION" />
                            <ToggleSwitch
                                IsOn="{x:Bind ViewModel.IsForward, Mode=TwoWay}"
                                OffContent="Backward"
                                OnContent="Forward" />
                        </StackPanel>

                        <!--  DCC Speed Steps  -->
                        <StackPanel Spacing="6">
                            <TextBlock
                                FontSize="11"
                                FontWeight="SemiBold"
                                Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                Text="DCC SPEED STEPS" />
                            <ComboBox
                                x:Name="SpeedStepsComboBox"
                                HorizontalAlignment="Stretch"
                                SelectedIndex="{x:Bind SpeedStepsSelectedIndex, Mode=TwoWay}"
                                SelectionChanged="SpeedStepsComboBox_SelectionChanged">
                                <ComboBoxItem Content="14 Steps" Tag="14" />
                                <ComboBoxItem Content="28 Steps" Tag="28" />
                                <ComboBoxItem Content="128 Steps" Tag="128" />
                            </ComboBox>
                        </StackPanel>

                        <!--  Separator  -->
                        <Border
                            Height="1"
                            Margin="0,4"
                            Background="{ThemeResource DividerStrokeColorDefaultBrush}" />

                        <!--  Acceleration Ramp  -->
                        <StackPanel Spacing="6">
                            <TextBlock
                                FontSize="11"
                                FontWeight="SemiBold"
                                Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                Text="ACCELERATION RAMP" />
                            <ToggleSwitch
                                IsOn="{x:Bind ViewModel.IsRampEnabled, Mode=TwoWay}"
                                OffContent="Instant"
                                OnContent="Gradual" />
                            <Grid ColumnSpacing="8">
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="*" />
                                    <RowDefinition Height="*" />
                                </Grid.RowDefinitions>
                                <StackPanel Grid.Row="0" Spacing="4">
                                    <TextBlock
                                        FontSize="10"
                                        Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                        Text="Step Size" />
                                    <NumberBox
                                        IsEnabled="{x:Bind ViewModel.IsRampEnabled, Mode=OneWay}"
                                        Maximum="20"
                                        Minimum="1"
                                        SmallChange="1"
                                        SpinButtonPlacementMode="Compact"
                                        Value="{x:Bind ViewModel.RampStepSize, Mode=TwoWay}" />
                                </StackPanel>
                                <StackPanel Grid.Row="1" Spacing="4">
                                    <TextBlock
                                        FontSize="10"
                                        Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                        Text="Interval (ms)" />
                                    <NumberBox
                                        IsEnabled="{x:Bind ViewModel.IsRampEnabled, Mode=OneWay}"
                                        Maximum="500"
                                        Minimum="50"
                                        SmallChange="10"
                                        SpinButtonPlacementMode="Compact"
                                        Value="{x:Bind ViewModel.RampIntervalMs, Mode=TwoWay}" />
                                </StackPanel>
                            </Grid>
                        </StackPanel>

                        <!--  Status  -->
                        <Border
                            Padding="12"
                            Background="{ThemeResource LayerFillColorDefaultBrush}"
                            CornerRadius="6">
                            <StackPanel Spacing="2">
                                <TextBlock
                                    FontSize="10"
                                    FontWeight="SemiBold"
                                    Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                    Text="STATUS" />
                                <TextBlock
                                    FontSize="12"
                                    Text="{x:Bind ViewModel.StatusMessage, Mode=OneWay}"
                                    TextWrapping="Wrap" />
                            </StackPanel>
                        </Border>

                        <!--  Ramping Indicator  -->
                        <Border
                            Padding="8"
                            Background="{ThemeResource SystemFillColorCautionBackgroundBrush}"
                            CornerRadius="4"
                            Visibility="{x:Bind ViewModel.IsRamping, Mode=OneWay, Converter={StaticResource BoolToVisibilityConverter}}">
                            <StackPanel Orientation="Horizontal" Spacing="8">
                                <ProgressRing
                                    Width="14"
                                    Height="14"
                                    IsActive="True" />
                                <TextBlock FontSize="11" Text="Ramping..." />
                            </StackPanel>
                        </Border>
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <!--  CENTER: 2x2 Grid Layout (Grid.Column="1")  -->
            <Grid
                x:Name="CenterGrid"
                Grid.Column="1"
                ColumnSpacing="16"
                RowSpacing="16">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!--  Bereich 1 (Bottom-Left): Speedometer  -->
                <Border
                    x:Name="SpeedometerPanel"
                    Grid.Row="1"
                    Grid.Column="0"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!--  Speedometer  -->
                        <controls:SpeedometerControl
                            x:Name="Speedometer"
                            Grid.Row="0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            DisplayValue="{x:Bind ViewModel.SpeedKmh, Mode=OneWay}"
                            MinValue="0"
                            Value="{x:Bind ViewModel.Speed, Mode=OneWay}" />

                        <!--  Slider and Presets (below Speedometer)  -->
                        <StackPanel Grid.Row="1" Spacing="16">
                            <!--  Horizontal Speed Slider  -->
                            <StackPanel Spacing="8">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="Auto" />
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="Auto" />
                                    </Grid.ColumnDefinitions>
                                    <TextBlock
                                        Grid.Column="0"
                                        VerticalAlignment="Center"
                                        FontSize="12"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        Text="0" />
                                    <Slider
                                        Grid.Column="1"
                                        Margin="16,0"
                                        Maximum="{x:Bind ViewModel.MaxSpeedStep, Mode=OneWay}"
                                        Minimum="0"
                                        TickFrequency="10"
                                        TickPlacement="BottomRight"
                                        Value="{x:Bind ViewModel.Speed, Mode=TwoWay}" />
                                    <TextBlock
                                        Grid.Column="2"
                                        VerticalAlignment="Center"
                                        FontSize="12"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        Text="{x:Bind ViewModel.MaxSpeedStep, Mode=OneWay}" />
                                </Grid>
                            </StackPanel>
                        </StackPanel>
                    </Grid>
                </Border>

                <!--  Bereich 2 (Top-Left): Locomotive Info Card  -->
                <Border
                    x:Name="LocomotiveInfoCard"
                    Grid.Row="0"
                    Grid.Column="0"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8">
                    
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!--  Header  -->
                        <StackPanel Grid.Row="0" Margin="0,0,0,12" Spacing="4">
                            <TextBlock
                                FontSize="11"
                                Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                Text="CURRENT LOCOMOTIVE" />
                        </StackPanel>

                        <!--  Locomotive Details  -->
                        <StackPanel
                            Grid.Row="1"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            Spacing="12">
                            
                            <!--  Icon + Name  -->
                            <StackPanel HorizontalAlignment="Center" Spacing="8">
                                <FontIcon
                                    FontSize="32"
                                    Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                                    Glyph="&#xE7C2;" />
                                <TextBlock
                                    FontSize="18"
                                    FontWeight="SemiBold"
                                    Text="{x:Bind ViewModel.CurrentPreset.Name, Mode=OneWay}"
                                    TextAlignment="Center" />
                            </StackPanel>

                            <!--  DCC Address and Vmax  -->
                            <StackPanel HorizontalAlignment="Center" Spacing="6">
                                <StackPanel Orientation="Horizontal" Spacing="6">
                                    <TextBlock
                                        FontSize="12"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        Text="DCC:" />
                                    <TextBlock
                                        FontSize="12"
                                        FontWeight="SemiBold"
                                        Text="{x:Bind ViewModel.LocoAddress, Mode=OneWay}" />
                                </StackPanel>
                                
                                <StackPanel Orientation="Horizontal" Spacing="6">
                                    <TextBlock
                                        FontSize="12"
                                        Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                        Text="Vmax:" />
                                    <TextBlock
                                        FontSize="12"
                                        FontWeight="SemiBold"
                                        Text="{x:Bind ViewModel.SelectedVmax, Mode=OneWay}" />
                                    <TextBlock
                                        FontSize="11"
                                        Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                        Text="km/h" />
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>

                        <!--  Preset Quick Switch  -->
                        <StackPanel
                            Grid.Row="2"
                            Margin="0,12,0,0"
                            Orientation="Horizontal"
                            Spacing="8">
                            
                            <Button
                                HorizontalAlignment="Stretch"
                                Command="{x:Bind ViewModel.SelectPreset1Command}"
                                Style="{StaticResource AccentButtonStyle}">
                                <StackPanel Spacing="2">
                                    <TextBlock FontSize="9" Text="PRESET 1" />
                                    <TextBlock
                                        FontSize="11"
                                        FontWeight="SemiBold"
                                        Text="{x:Bind ViewModel.Preset1.Name, Mode=OneWay}" />
                                </StackPanel>
                            </Button>

                            <Button
                                HorizontalAlignment="Stretch"
                                Command="{x:Bind ViewModel.SelectPreset2Command}"
                                Style="{StaticResource AccentButtonStyle}">
                                <StackPanel Spacing="2">
                                    <TextBlock FontSize="9" Text="PRESET 2" />
                                    <TextBlock
                                        FontSize="11"
                                        FontWeight="SemiBold"
                                        Text="{x:Bind ViewModel.Preset2.Name, Mode=OneWay}" />
                                </StackPanel>
                            </Button>

                            <Button
                                HorizontalAlignment="Stretch"
                                Command="{x:Bind ViewModel.SelectPreset3Command}"
                                Style="{StaticResource AccentButtonStyle}">
                                <StackPanel Spacing="2">
                                    <TextBlock FontSize="9" Text="PRESET 3" />
                                    <TextBlock
                                        FontSize="11"
                                        FontWeight="SemiBold"
                                        Text="{x:Bind ViewModel.Preset3.Name, Mode=OneWay}" />
                                </StackPanel>
                            </Button>
                        </StackPanel>
                    </Grid>
                </Border>

                <!--  Bereich 3 (Top-Right): Journey Info / Timetable Stops  -->
                <controls:TimetableStopsControl
                    x:Name="TimetableStops"
                    Grid.Row="0"
                    Grid.Column="1"
                    CurrentStationArrivalValue="{x:Bind ViewModel.CurrentStationArrival, Mode=OneWay}"
                    CurrentStationDepartureValue="{x:Bind ViewModel.CurrentStationDeparture, Mode=OneWay}"
                    CurrentStationNameValue="{x:Bind ViewModel.CurrentStationName, Mode=OneWay}"
                    CurrentStationTrackValue="{x:Bind ViewModel.CurrentStationTrack, Mode=OneWay}"
                    NextStationArrivalValue="{x:Bind ViewModel.NextStationArrival, Mode=OneWay}"
                    NextStationDepartureValue="{x:Bind ViewModel.NextStationDeparture, Mode=OneWay}"
                    NextStationNameValue="{x:Bind ViewModel.NextStationName, Mode=OneWay}"
                    NextStationTrackValue="{x:Bind ViewModel.NextStationTrack, Mode=OneWay}"
                    PreviousStationArrivalValue="{x:Bind ViewModel.PreviousStationArrival, Mode=OneWay}"
                    PreviousStationDepartureValue="{x:Bind ViewModel.PreviousStationDeparture, Mode=OneWay}"
                    PreviousStationNameValue="{x:Bind ViewModel.PreviousStationName, Mode=OneWay}"
                    PreviousStationTrackValue="{x:Bind ViewModel.PreviousStationTrack, Mode=OneWay}" />

                <!--  Bereich 4 (Bottom-Right): Amperemeter (Main Track Current)  -->
                <Border
                    x:Name="AmperemeterPanel"
                    Grid.Row="1"
                    Grid.Column="1"
                    Padding="16"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                    BorderThickness="1"
                    CornerRadius="8">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <!--  Header with Peak Badge  -->
                        <Grid Grid.Row="0" Margin="0,0,0,8">
                            <TextBlock
                                FontSize="11"
                                Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                Text="AMPEREMETER" />
                            
                            <!--  Peak Current Badge  -->
                            <StackPanel
                                HorizontalAlignment="Right"
                                Orientation="Horizontal"
                                Spacing="4">
                                <TextBlock
                                    FontSize="10"
                                    Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                    Text="MAX:" />
                                <TextBlock
                                    FontSize="10"
                                    FontWeight="SemiBold"
                                    Foreground="{ThemeResource AccentTextFillColorPrimaryBrush}"
                                    Text="{x:Bind ViewModel.PeakMainCurrent, Mode=OneWay}" />
                                <Button
                                    Padding="4,2"
                                    Background="Transparent"
                                    Command="{x:Bind ViewModel.ResetPeakCurrentCommand}"
                                    Content="×"
                                    FontSize="14"
                                    ToolTipService.ToolTip="Reset peak current">
                                    <Button.Resources>
                                        <SolidColorBrush x:Key="ButtonBackgroundPointerOver" Color="Transparent" />
                                    </Button.Resources>
                                </Button>
                            </StackPanel>
                        </Grid>

                        <!--  Amperemeter  -->
                        <controls:AmperemeterControl
                            x:Name="Amperemeter"
                            Grid.Row="1"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            MaxValue="3000"
                            MinValue="0"
                            Value="{x:Bind ViewModel.MainTrackCurrent, Mode=OneWay}" />

                        <!--  Additional Info (below Amperemeter)  -->
                        <StackPanel Grid.Row="2" Spacing="8">
                            <Border
                                Padding="8"
                                Background="{ThemeResource LayerFillColorDefaultBrush}"
                                CornerRadius="4">
                                <Grid ColumnSpacing="12">
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="*" />
                                        <ColumnDefinition Width="*" />
                                    </Grid.ColumnDefinitions>
                                    
                                    <!--  Supply Voltage  -->
                                    <StackPanel Grid.Column="0" Spacing="2">
                                        <TextBlock
                                            FontSize="9"
                                            Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                            Text="SUPPLY" />
                                        <StackPanel Orientation="Horizontal" Spacing="4">
                                            <TextBlock
                                                FontSize="12"
                                                FontWeight="SemiBold"
                                                Text="{x:Bind ViewModel.SupplyVoltage, Mode=OneWay, Converter={StaticResource MillivoltsToVoltsConverter}}" />
                                            <TextBlock
                                                FontSize="10"
                                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                Text="V" />
                                        </StackPanel>
                                    </StackPanel>
                                    
                                    <!--  Temperature  -->
                                    <StackPanel Grid.Column="1" Spacing="2">
                                        <TextBlock
                                            FontSize="9"
                                            Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                                            Text="TEMP" />
                                        <StackPanel Orientation="Horizontal" Spacing="4">
                                            <TextBlock
                                                FontSize="12"
                                                FontWeight="SemiBold"
                                                Text="{x:Bind ViewModel.Temperature, Mode=OneWay}" />
                                            <TextBlock
                                                FontSize="10"
                                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                                Text="°C" />
                                        </StackPanel>
                                    </StackPanel>
                                </Grid>
                            </Border>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>

            <!--  RIGHT PANEL: Functions F0-F20 (Grid.Column="2") - Hidden on Medium/Compact  -->
            <Border
                x:Name="FunctionsPanel"
                Grid.Column="2"
                Padding="16"
                Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}"
                BorderThickness="1"
                CornerRadius="8">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Spacing="12">
                        <!--  Header  -->
                        <TextBlock
                            FontSize="11"
                            FontWeight="SemiBold"
                            Foreground="{ThemeResource TextFillColorTertiaryBrush}"
                            Text="FUNCTIONS" />

                        <!--  Functions F0-F10 (Left Column)  -->
                        <StackPanel Spacing="4">
                            <TextBlock
                                FontSize="9"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="F0 - F10" />
                            <Grid ColumnSpacing="4" RowSpacing="4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <!--  F0 (Light - Yellow)  -->
                                <ToggleButton
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Background="{x:Bind ViewModel.IsF0On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#FFD700}"
                                    Command="{x:Bind ViewModel.ToggleF0Command}"
                                    IsChecked="{x:Bind ViewModel.IsF0On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE7B7;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F0"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F1 (Sound - Blue)  -->
                                <ToggleButton
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Background="{x:Bind ViewModel.IsF1On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#0078D4}"
                                    Command="{x:Bind ViewModel.ToggleF1Command}"
                                    IsChecked="{x:Bind ViewModel.IsF1On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE767;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F1"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F2 (Horn - Orange)  -->
                                <ToggleButton
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Background="{x:Bind ViewModel.IsF2On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#FF8C00}"
                                    Command="{x:Bind ViewModel.ToggleF2Command}"
                                    IsChecked="{x:Bind ViewModel.IsF2On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE7C0;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F2"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F3 (Door Close - Red)  -->
                                <ToggleButton
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    Background="{x:Bind ViewModel.IsF3On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#E81123}"
                                    Command="{x:Bind ViewModel.ToggleF3Command}"
                                    IsChecked="{x:Bind ViewModel.IsF3On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE8BB;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F3"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F4 (Door Release - Green)  -->
                                <ToggleButton
                                    Grid.Row="2"
                                    Grid.Column="0"
                                    Background="{x:Bind ViewModel.IsF4On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#107C10}"
                                    Command="{x:Bind ViewModel.ToggleF4Command}"
                                    IsChecked="{x:Bind ViewModel.IsF4On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE8BA;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F4"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F5 (Shunting Light - Teal)  -->
                                <ToggleButton
                                    Grid.Row="2"
                                    Grid.Column="1"
                                    Background="{x:Bind ViewModel.IsF5On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#00B7C3}"
                                    Command="{x:Bind ViewModel.ToggleF5Command}"
                                    IsChecked="{x:Bind ViewModel.IsF5On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE754;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F5"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F6 (Interior Light - Warm Yellow)  -->
                                <ToggleButton
                                    Grid.Row="3"
                                    Grid.Column="0"
                                    Background="{x:Bind ViewModel.IsF6On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#FFB900}"
                                    Command="{x:Bind ViewModel.ToggleF6Command}"
                                    IsChecked="{x:Bind ViewModel.IsF6On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xEB50;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F6"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F7 (Smoke - Gray)  -->
                                <ToggleButton
                                    Grid.Row="3"
                                    Grid.Column="1"
                                    Background="{x:Bind ViewModel.IsF7On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#767676}"
                                    Command="{x:Bind ViewModel.ToggleF7Command}"
                                    IsChecked="{x:Bind ViewModel.IsF7On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE753;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F7"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F8 (Pantograph - Magenta)  -->
                                <ToggleButton
                                    Grid.Row="4"
                                    Grid.Column="0"
                                    Background="{x:Bind ViewModel.IsF8On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#E81B23}"
                                    Command="{x:Bind ViewModel.ToggleF8Command}"
                                    IsChecked="{x:Bind ViewModel.IsF8On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE74A;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F8"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F9 (Coupler - Purple)  -->
                                <ToggleButton
                                    Grid.Row="4"
                                    Grid.Column="1"
                                    Background="{x:Bind ViewModel.IsF9On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#7B68EE}"
                                    Command="{x:Bind ViewModel.ToggleF9Command}"
                                    IsChecked="{x:Bind ViewModel.IsF9On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE71B;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F9"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>
                            </Grid>
                        </StackPanel>

                        <!--  Functions F11-F20 (Right Column)  -->
                        <StackPanel Spacing="4">
                            <TextBlock
                                FontSize="9"
                                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                                Text="F11 - F20" />
                            <Grid ColumnSpacing="4" RowSpacing="4">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="*" />
                                </Grid.ColumnDefinitions>
                                <Grid.RowDefinitions>
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                    <RowDefinition Height="Auto" />
                                </Grid.RowDefinitions>

                                <!--  F11 (Teal)  -->
                                <ToggleButton
                                    Grid.Row="0"
                                    Grid.Column="0"
                                    Background="{x:Bind ViewModel.IsF11On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#038387}"
                                    Command="{x:Bind ViewModel.ToggleF11Command}"
                                    IsChecked="{x:Bind ViewModel.IsF11On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE713;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F11"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F12 (Orchid)  -->
                                <ToggleButton
                                    Grid.Row="0"
                                    Grid.Column="1"
                                    Background="{x:Bind ViewModel.IsF12On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#C239B3}"
                                    Command="{x:Bind ViewModel.ToggleF12Command}"
                                    IsChecked="{x:Bind ViewModel.IsF12On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xEC4F;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F12"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F13 (Hot Pink)  -->
                                <ToggleButton
                                    Grid.Row="1"
                                    Grid.Column="0"
                                    Background="{x:Bind ViewModel.IsF13On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#FF1493}"
                                    Command="{x:Bind ViewModel.ToggleF13Command}"
                                    IsChecked="{x:Bind ViewModel.IsF13On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE720;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F13"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F14 (Gray)  -->
                                <ToggleButton
                                    Grid.Row="1"
                                    Grid.Column="1"
                                    Background="{x:Bind ViewModel.IsF14On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#7A7574}"
                                    Command="{x:Bind ViewModel.ToggleF14Command}"
                                    IsChecked="{x:Bind ViewModel.IsF14On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE90F;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F14"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F15 (Sage)  -->
                                <ToggleButton
                                    Grid.Row="2"
                                    Grid.Column="0"
                                    Background="{x:Bind ViewModel.IsF15On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#567C73}"
                                    Command="{x:Bind ViewModel.ToggleF15Command}"
                                    IsChecked="{x:Bind ViewModel.IsF15On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE7C1;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F15"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F16 (Brown)  -->
                                <ToggleButton
                                    Grid.Row="2"
                                    Grid.Column="1"
                                    Background="{x:Bind ViewModel.IsF16On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#8E562E}"
                                    Command="{x:Bind ViewModel.ToggleF16Command}"
                                    IsChecked="{x:Bind ViewModel.IsF16On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE90F;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F16"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F17 (Tan)  -->
                                <ToggleButton
                                    Grid.Row="3"
                                    Grid.Column="0"
                                    Background="{x:Bind ViewModel.IsF17On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#847545}"
                                    Command="{x:Bind ViewModel.ToggleF17Command}"
                                    IsChecked="{x:Bind ViewModel.IsF17On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE9D9;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F17"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F18 (Slate)  -->
                                <ToggleButton
                                    Grid.Row="3"
                                    Grid.Column="1"
                                    Background="{x:Bind ViewModel.IsF18On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#525E54}"
                                    Command="{x:Bind ViewModel.ToggleF18Command}"
                                    IsChecked="{x:Bind ViewModel.IsF18On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE945;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F18"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F19 (Dark Gray)  -->
                                <ToggleButton
                                    Grid.Row="4"
                                    Grid.Column="0"
                                    Background="{x:Bind ViewModel.IsF19On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#4A5459}"
                                    Command="{x:Bind ViewModel.ToggleF19Command}"
                                    IsChecked="{x:Bind ViewModel.IsF19On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE823;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F19"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>

                                <!--  F20 (Steel Blue)  -->
                                <ToggleButton
                                    Grid.Row="4"
                                    Grid.Column="1"
                                    Background="{x:Bind ViewModel.IsF20On, Mode=OneWay, Converter={StaticResource BacklightConverter}, ConverterParameter=#69797E}"
                                    Command="{x:Bind ViewModel.ToggleF20Command}"
                                    IsChecked="{x:Bind ViewModel.IsF20On, Mode=OneWay}"
                                    Style="{StaticResource BacklightToggleButtonStyle}">
                                    <StackPanel Spacing="2">
                                        <FontIcon FontSize="16" Glyph="&#xE734;" />
                                        <TextBlock
                                            FontSize="9"
                                            Text="F20"
                                            TextAlignment="Center" />
                                    </StackPanel>
                                </ToggleButton>
                            </Grid>
                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>
    </Grid>
</Page>
