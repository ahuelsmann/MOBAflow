<Page
    x:Class="Moba.WinUI.View.EditorPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Page Header  -->
        <StackPanel Grid.Row="0" Margin="24,16,24,8" Spacing="8">
            <TextBlock
                FontWeight="Bold"
                Style="{StaticResource TitleTextBlockStyle}"
                Text="Editor" />
            <TextBlock
                Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                Style="{StaticResource BodyTextBlockStyle}"
                Text="{x:Bind ViewModel.ProjectName, Mode=OneWay}" />
        </StackPanel>

        <!--  TabView with Editor Tabs  -->
        <TabView
            Grid.Row="1"
            Margin="24,0,24,24"
            SelectedIndex="{x:Bind ViewModel.SelectedTabIndex, Mode=TwoWay}"
            TabWidthMode="Equal">

            <!--  Journeys Tab  -->
            <TabViewItem Header="Journeys">
                <TabViewItem.IconSource>
                    <FontIconSource Glyph="&#xE81D;" />
                </TabViewItem.IconSource>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*" MinWidth="300" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="3*" MinWidth="400" />
                    </Grid.ColumnDefinitions>

                    <!--  Master: Journeys  -->
                    <Grid Grid.Column="0" Padding="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Margin="0,0,0,8" Style="{StaticResource SubtitleTextBlockStyle}" Text="Journeys" />

                        <ListView
                            Grid.Row="1"
                            ItemsSource="{x:Bind ViewModel.JourneyEditor.Journeys, Mode=OneWay}"
                            SelectedItem="{x:Bind ViewModel.JourneyEditor.SelectedJourney, Mode=TwoWay}">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Padding="8" Text="{Binding Name}" />
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>

                        <StackPanel Grid.Row="2" Margin="0,8,0,0" Orientation="Horizontal" Spacing="8">
                            <Button Command="{x:Bind ViewModel.JourneyEditor.AddJourneyCommand}" Content="Add" Style="{StaticResource AccentButtonStyle}" />
                            <Button Command="{x:Bind ViewModel.JourneyEditor.DeleteJourneyCommand}" Content="Delete" />
                        </StackPanel>
                    </Grid>

                    <Border Grid.Column="1" Width="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}" />

                    <!--  Detail: Stations  -->
                    <Grid Grid.Column="2" Padding="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Margin="0,0,0,8" Style="{StaticResource SubtitleTextBlockStyle}" Text="Stations" />

                        <ListView Grid.Row="1" ItemsSource="{x:Bind ViewModel.JourneyEditor.Stations, Mode=OneWay}">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Padding="8" Text="{Binding Name}" />
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>

                        <Button Grid.Row="2" Margin="0,8,0,0" Command="{x:Bind ViewModel.JourneyEditor.AddStationCommand}" Content="Add Station" />
                    </Grid>
                </Grid>
            </TabViewItem>

            <!--  Workflows Tab  -->
            <TabViewItem Header="Workflows">
                <TabViewItem.IconSource>
                    <FontIconSource Glyph="&#xE8F5;" />
                </TabViewItem.IconSource>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="2*" MinWidth="300" />
                        <ColumnDefinition Width="Auto" />
                        <ColumnDefinition Width="3*" MinWidth="400" />
                    </Grid.ColumnDefinitions>

                    <Grid Grid.Column="0" Padding="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Margin="0,0,0,8" Style="{StaticResource SubtitleTextBlockStyle}" Text="Workflows" />

                        <ListView
                            Grid.Row="1"
                            ItemsSource="{x:Bind ViewModel.WorkflowEditor.Workflows, Mode=OneWay}"
                            SelectedItem="{x:Bind ViewModel.WorkflowEditor.SelectedWorkflow, Mode=TwoWay}">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Padding="8" Text="{Binding Name}" />
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>

                        <StackPanel Grid.Row="2" Margin="0,8,0,0" Orientation="Horizontal" Spacing="8">
                            <Button Command="{x:Bind ViewModel.WorkflowEditor.AddWorkflowCommand}" Content="Add" Style="{StaticResource AccentButtonStyle}" />
                            <Button Command="{x:Bind ViewModel.WorkflowEditor.DeleteWorkflowCommand}" Content="Delete" />
                        </StackPanel>
                    </Grid>

                    <Border Grid.Column="1" Width="1" Background="{ThemeResource DividerStrokeColorDefaultBrush}" />

                    <Grid Grid.Column="2" Padding="16">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="Auto" />
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0" Margin="0,0,0,8" Style="{StaticResource SubtitleTextBlockStyle}" Text="Actions" />

                        <ListView Grid.Row="1" ItemsSource="{x:Bind ViewModel.WorkflowEditor.Actions, Mode=OneWay}">
                            <ListView.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Padding="8" Text="{Binding Name}" />
                                </DataTemplate>
                            </ListView.ItemTemplate>
                        </ListView>

                        <StackPanel Grid.Row="2" Margin="0,8,0,0" Orientation="Horizontal" Spacing="8">
                            <Button Command="{x:Bind ViewModel.WorkflowEditor.AddAnnouncementCommand}" Content="Announcement" />
                            <Button Command="{x:Bind ViewModel.WorkflowEditor.AddCommandCommand}" Content="Command" />
                            <Button Command="{x:Bind ViewModel.WorkflowEditor.AddAudioCommand}" Content="Audio" />
                        </StackPanel>
                    </Grid>
                </Grid>
            </TabViewItem>

            <!--  Trains Tab  -->
            <TabViewItem Header="Trains">
                <TabViewItem.IconSource>
                    <FontIconSource Glyph="&#xE7C0;" />
                </TabViewItem.IconSource>
                <Grid Padding="16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Margin="0,0,0,8" Style="{StaticResource SubtitleTextBlockStyle}" Text="Trains" />

                    <ListView
                        Grid.Row="1"
                        ItemsSource="{x:Bind ViewModel.TrainEditor.Trains, Mode=OneWay}"
                        SelectedItem="{x:Bind ViewModel.TrainEditor.SelectedTrain, Mode=TwoWay}">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Padding="8" Text="{Binding Name}" />
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>

                    <StackPanel Grid.Row="2" Margin="0,8,0,0" Orientation="Horizontal" Spacing="8">
                        <Button Command="{x:Bind ViewModel.TrainEditor.AddTrainCommand}" Content="Add" Style="{StaticResource AccentButtonStyle}" />
                        <Button Command="{x:Bind ViewModel.TrainEditor.DeleteTrainCommand}" Content="Delete" />
                        <Button Command="{x:Bind ViewModel.TrainEditor.AddLocomotiveToCompositionCommand}" Content="Add Loco" />
                        <Button Command="{x:Bind ViewModel.TrainEditor.AddWagonToCompositionCommand}" Content="Add Wagon" />
                    </StackPanel>
                </Grid>
            </TabViewItem>

            <!--  Locomotives Tab  -->
            <TabViewItem Header="Locomotives">
                <TabViewItem.IconSource>
                    <FontIconSource Glyph="&#xE7C0;" />
                </TabViewItem.IconSource>
                <Grid Padding="16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Margin="0,0,0,8" Style="{StaticResource SubtitleTextBlockStyle}" Text="Locomotives Library" />

                    <ListView
                        Grid.Row="1"
                        ItemsSource="{x:Bind ViewModel.LocomotiveEditor.Locomotives, Mode=OneWay}"
                        SelectedItem="{x:Bind ViewModel.LocomotiveEditor.SelectedLocomotive, Mode=TwoWay}">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Padding="8" Text="{Binding Name}" />
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>

                    <StackPanel Grid.Row="2" Margin="0,8,0,0" Orientation="Horizontal" Spacing="8">
                        <Button Command="{x:Bind ViewModel.LocomotiveEditor.AddLocomotiveCommand}" Content="Add" Style="{StaticResource AccentButtonStyle}" />
                        <Button Command="{x:Bind ViewModel.LocomotiveEditor.DeleteLocomotiveCommand}" Content="Delete" />
                    </StackPanel>
                </Grid>
            </TabViewItem>

            <!--  Wagons Tab  -->
            <TabViewItem Header="Wagons">
                <TabViewItem.IconSource>
                    <FontIconSource Glyph="&#xE8EC;" />
                </TabViewItem.IconSource>
                <Grid Padding="16">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="*" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>

                    <TextBlock Grid.Row="0" Margin="0,0,0,8" Style="{StaticResource SubtitleTextBlockStyle}" Text="Wagons Library" />

                    <ListView
                        Grid.Row="1"
                        ItemsSource="{x:Bind ViewModel.WagonEditor.Wagons, Mode=OneWay}"
                        SelectedItem="{x:Bind ViewModel.WagonEditor.SelectedWagon, Mode=TwoWay}">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <TextBlock Padding="8" Text="{Binding Name}" />
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>

                    <StackPanel Grid.Row="2" Margin="0,8,0,0" Orientation="Horizontal" Spacing="8">
                        <Button Command="{x:Bind ViewModel.WagonEditor.AddPassengerWagonCommand}" Content="Add Passenger" Style="{StaticResource AccentButtonStyle}" />
                        <Button Command="{x:Bind ViewModel.WagonEditor.AddGoodsWagonCommand}" Content="Add Goods" />
                        <Button Command="{x:Bind ViewModel.WagonEditor.DeleteWagonCommand}" Content="Delete" />
                    </StackPanel>
                </Grid>
            </TabViewItem>

            <!--  Settings Tab  -->
            <TabViewItem Header="Settings">
                <TabViewItem.IconSource>
                    <FontIconSource Glyph="&#xE713;" />
                </TabViewItem.IconSource>
                <ScrollViewer>
                    <StackPanel Padding="16" MaxWidth="600" Spacing="16">
                        <TextBlock Style="{StaticResource SubtitleTextBlockStyle}" Text="Project Settings" />

                        <TextBox
                            Header="Speech Key"
                            PlaceholderText="Enter Azure Speech API Key"
                            Text="{x:Bind ViewModel.SettingsEditor.SpeechKey, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBox
                            Header="Speech Region"
                            PlaceholderText="e.g. westeurope"
                            Text="{x:Bind ViewModel.SettingsEditor.SpeechRegion, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBox
                            Header="Voice Name"
                            PlaceholderText="e.g. de-DE-KatjaNeural"
                            Text="{x:Bind ViewModel.SettingsEditor.VoiceName, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />

                        <TextBlock
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            Style="{StaticResource CaptionTextBlockStyle}"
                            Text="Configure Azure Cognitive Services Speech API credentials for text-to-speech announcements."
                            TextWrapping="Wrap" />
                    </StackPanel>
                </ScrollViewer>
            </TabViewItem>

        </TabView>
    </Grid>
</Page>
