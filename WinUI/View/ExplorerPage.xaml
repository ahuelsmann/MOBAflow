<?xml version="1.0" encoding="utf-8"?>
<Page
    x:Class="Moba.WinUI.View.ExplorerPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:vm="using:Moba.SharedUI.ViewModel"
    mc:Ignorable="d">

    <Grid Background="{ThemeResource LayerFillColorDefaultBrush}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="2*" MinWidth="300" />
            <ColumnDefinition Width="Auto" />
            <ColumnDefinition Width="3*" MinWidth="400" />
        </Grid.ColumnDefinitions>

        <!--  Explorer TreeView  -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
            </Grid.RowDefinitions>

            <TextBlock
                Grid.Row="0"
                Margin="16,12"
                Style="{StaticResource SubtitleTextBlockStyle}"
                Text="Explorer" />

            <ScrollViewer
                Grid.Row="1"
                Padding="8"
                HorizontalScrollBarVisibility="Auto"
                VerticalScrollBarVisibility="Auto">
                <TreeView
                    x:Name="SolutionTreeView"
                    AllowDrop="True"
                    CanDragItems="True"
                    CanReorderItems="True"
                    ItemsSource="{x:Bind ViewModel.TreeNodes, Mode=OneWay}"
                    SelectionChanged="SolutionTreeView_SelectionChanged">
                    <TreeView.ItemTemplate>
                        <DataTemplate x:DataType="vm:TreeNodeViewModel">
                            <TreeViewItem
                                IsExpanded="{x:Bind IsExpanded, Mode=TwoWay}"
                                ItemsSource="{x:Bind Children, Mode=OneWay}"
                                Tag="{x:Bind}">
                                <StackPanel Orientation="Horizontal" Spacing="8">
                                    <FontIcon FontSize="16" Glyph="{x:Bind Icon, Mode=OneWay}" />
                                    <TextBlock Text="{x:Bind DisplayName, Mode=OneWay}" TextWrapping="NoWrap" />
                                </StackPanel>
                            </TreeViewItem>
                        </DataTemplate>
                    </TreeView.ItemTemplate>
                </TreeView>
            </ScrollViewer>
        </Grid>

        <Border
            Grid.Column="1"
            Width="1"
            Background="{ThemeResource DividerStrokeColorDefaultBrush}" />

        <!--  Properties Panel with Cities  -->
        <Grid Grid.Column="2">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="*" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!--  Properties Header  -->
            <Grid Grid.Row="0" Padding="16,16,16,8">
                <TextBlock
                    Style="{StaticResource SubtitleTextBlockStyle}"
                    Text="Properties" />
            </Grid>

            <!--  Properties Content  -->
            <ScrollViewer Grid.Row="1" Padding="16,0" VerticalScrollBarVisibility="Auto">
                <StackPanel Spacing="16">
                    <StackPanel Spacing="4">
                        <TextBlock
                            FontWeight="SemiBold"
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            Text="Project"
                            Style="{ThemeResource CaptionTextBlockStyle}" />
                        <TextBlock
                            Foreground="{ThemeResource TextFillColorSecondaryBrush}"
                            Text="Project Name"
                            Style="{ThemeResource BodyTextBlockStyle}" />
                        <TextBox
                            HorizontalAlignment="Stretch"
                            PlaceholderText="(Untitled Project)"
                            Text="{x:Bind ViewModel.Solution.Name, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </StackPanel>
                </StackPanel>
            </ScrollViewer>

            <!--  Cities Section  -->
            <Grid Grid.Row="2" Padding="16" BorderBrush="{ThemeResource CardStrokeColorDefaultBrush}" BorderThickness="0,1,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <TextBlock
                    Grid.Row="0"
                    Margin="0,0,0,12"
                    Style="{StaticResource SubtitleTextBlockStyle}"
                    Text="Cities" />

                <Button
                    Grid.Row="1"
                    HorizontalAlignment="Stretch"
                    Content="Load Cities"
                    Style="{StaticResource AccentButtonStyle}" />
            </Grid>
        </Grid>
    </Grid>
</Page>
